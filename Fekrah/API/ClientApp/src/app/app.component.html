<!-- الحاوي الرئيسي للموقع مع إمكانية النقر للإغلاق -->
<div class="app-container " [class.filter-active]="filtersOpened" (click)="onSiteClick($event)">
  <app-header
    [isFilterOpen]="filtersOpened"
    (toggleFilter)="toggleFilters()">
  </app-header>
  <app-loader></app-loader>
  <!-- ✅ محتوى الصفحة الرئيسية -->
<main class="main-content position-relative">

</main>
<router-outlet></router-outlet>

  <!-- ✅ الفوتر -->
  <app-footer></app-footer>

</div>

<!-- ✅ Sidebar الفلتر الجديد - خارج الحاوي الرئيسي -->
<app-filters-sidebar
  [showSidebar]="filtersOpened"
  [filterSections]="filterSections"
  [availableBrands]="availableBrands"
  [availableModels]="availableModels"
  [availableYears]="availableYears"
  [availableTypes]="availableTypes"
  [availableCategories]="availableCategories"
  [availableConditions]="availableConditions"
  [selectedFilters]="selectedFilters"
  [activeFilterSection]="activeFilterSection"
  (closeSidebar)="closeFilters()"
  (toggleFilterSection)="toggleFilterSection($event)"
  (toggleFilter)="toggleFilter($event)"
  (clearAllFilters)="clearAllFilters()">
</app-filters-sidebar>

<!-- DEBUG: filtersOpened in app = {{filtersOpened}} -->

<!-- Overlay للشاشات الصغيرة -->
<div
  class="filter-overlay"
  [class.active]="filtersOpened"
  (click)="closeFilters()"
  *ngIf="filtersOpened">
</div>

<!-- تلميح النقر للإغلاق (يظهر في الشاشات الكبيرة) -->
<div class="click-to-close-hint" *ngIf="filtersOpened">
  انقر في أي مكان لإغلاق الفلتر
</div>

