  <!-- الصفحة الرئيسية -->
<div class="category-parts-page" [class.shifted]="showSidebar">
  <!-- العنوان والبحث -->
  <header class="header">
     <!-- Title on the far right -->
    <h1 class="page-title">
      <i class="fas fa-home"></i>
      الرئيسية
    </h1>

    <div class="filters-container">
      <div class="search-container">
        <div class="search-box">
          <i class="fas fa-search search-icon"></i>
          <input 
            type="text" 
            placeholder="ابحث عن قطع الغيار..." 
            class="search-input"
            [(ngModel)]="searchTerm"
            (input)="onSearchChange($event)">
          <button 
            *ngIf="searchTerm" 
            class="clear-search-btn"
            (click)="clearSearch()">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>

     <!-- Filter button on the far left -->
    <div class="header-actions">
      <button class="filter-btn" [class.active]="showSidebar" (click)="toggleSidebar()">
        <i class="fas fa-filter"></i>
        <span class="filter-text">فلتر</span>
        <span class="filter-count">({{ getActiveFiltersCount() }})</span>
      </button>
    </div>

  
  </header>
  <!-- عرض القطع -->
  <section class="parts-section">
    <!-- في حالة وجود قطع -->
    <div class="parts-container">
      <div class="parts-grid" *ngIf="displayParts.length > 0; else noParts">
        <app-card *ngFor="let part of displayParts; trackBy: trackByPartId" [part]="part"
          (partClick)="onPartClick($event)">
        </app-card>
      </div>
    </div>

    <!-- في حالة عدم وجود قطع -->
    <ng-template #noParts>
      <div class="no-results-message">
        <div>
          <svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="160" height="160" rx="20" fill="#F4F6FA" />
            <path
              d="M45 55H115C117.761 55 120 57.2386 120 60V100C120 102.761 117.761 105 115 105H45C42.2386 105 40 102.761 40 100V60C40 57.2386 42.2386 55 45 55Z"
              fill="#E0E7FF" />
            <path d="M50 60H110V100H50V60Z" fill="white" />
            <path d="M65 75H95V78H65V75Z" fill="#A0AEC0" />
            <path d="M65 83H95V86H65V83Z" fill="#CBD5E0" />
            <path d="M65 91H95V94H65V91Z" fill="#E2E8F0" />
            <circle cx="80" cy="40" r="10" fill="#667EEA" />
            <path d="M80 48C72.268 48 66 54.268 66 62H94C94 54.268 87.732 48 80 48Z" fill="#A3BFFA" />
          </svg>
        </div>

        <h2>لم نعثر على أي قطع مطابقة</h2>
        <p>جرب تعديل الفلاتر أو البحث بكلمات مختلفة.</p>
        <button (click)="clearAllFilters()" class="retry-button">
          <i class="fas fa-redo-alt"></i>
          إعادة المحاولة بدون فلاتر
        </button>
      </div>
    </ng-template>


    <!-- الصفحات -->
    <div class="pagination-container" *ngIf="displayParts.length > 0">
      <p-paginator 
        [rows]="itemsPerPage" 
        [totalRecords]="filteredParts.length" 
        [first]="(currentPage - 1) * itemsPerPage"
        [rowsPerPageOptions]="itemsPerPageOptions"
        (onPageChange)="onPaginatorPageChange($event)"
        styleClass="custom-paginator"
        [dir]="'rtl'"
        [showFirstLastIcon]="true"
        [showPageLinks]="true"
        previousPageLinkIcon="pi pi-chevron-right"
        nextPageLinkIcon="pi pi-chevron-left"
        firstPageLinkIcon="pi pi-angle-double-right"
        lastPageLinkIcon="pi pi-angle-double-left">
      </p-paginator>
    </div>
  </section>

</div>


