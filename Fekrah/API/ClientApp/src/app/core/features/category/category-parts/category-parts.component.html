<!-- category-parts.component.html -->
<div class="category-parts-page">
  <div class="page-layout">

     <!-- ููุญุฉ ุงูููุงุชุฑ ุนูู ุงููููู -->
     <aside class="filters-sidebar" [class.open]="showFilters">
      <h4>ุงุจุญุซ ูููุชุฑ</h4>

      <div class="filter-group search-group">
        <input
          type="text"
          placeholder="๐ ุงุจุญุซ ุนู ููุชุฌ..."
          [(ngModel)]="searchText"
          (input)="applyFilters()"
        />
      </div>

      <div class="filter-group">
        <label>ุงูุญุงูุฉ:</label>
        <div class="checkbox-group">
          <label><input type="checkbox" value="New" (change)="onConditionChange($event)" /> ุฌุฏูุฏ</label>
          <label><input type="checkbox" value="Refurbished" (change)="onConditionChange($event)" /> ูุณุชุนูู</label>
        </div>
      </div>

      <div class="filter-group">
        <label>ุงูุณุนุฑ ({{ selectedPriceMin }}โ{{ selectedPriceMax }} ุฌ):</label>
        <div class="price-range">
          <input
            type="range"
            min="0"
            [max]="maxPrice"
            [(ngModel)]="selectedPriceMin"
            (change)="applyFilters()"
          />
          <input
            type="range"
            min="0"
            [max]="maxPrice"
            [(ngModel)]="selectedPriceMax"
            (change)="applyFilters()"
          />
        </div>
      </div>

      <div class="filter-group">
        <label>ุงููุฆุฉ:</label>
        <div class="checkbox-group">
          <label *ngFor="let cat of categoriesList">
            <input type="checkbox" [value]="cat" (change)="onCategoryChange($event)" /> {{ cat }}
          </label>
        </div>
      </div>

      <div class="filter-group">
        <label>ุงููุงุฑูุฉ:</label>
        <div class="checkbox-group">
          <label *ngFor="let br of brandsList">
            <input type="checkbox" [value]="br" (change)="onBrandChange($event)" /> {{ br }}
          </label>
        </div>
      </div>

      <div class="filter-group">
        <label>ุงูุชูุตูู ุงูุณุฑูุน:</label>
        <div class="checkbox-group">
          <label><input type="checkbox" (change)="onDeliveryChange($event)" /> ูุชุงุญ ููุท</label>
        </div>
      </div>

      <div class="filter-group">
        <label>ุงูุชูููู:</label>
        <div class="radio-group">
          <label *ngFor="let star of [5,4,3,2,1]">
            <input type="radio" name="rating" [value]="star" (change)="onRatingChange($event)" />
            {{ star }} ูุฌูู ููุง ููู
          </label>
        </div>
      </div>

      <button class="btn-reset" (click)="resetFilters()">ุฅุนุงุฏุฉ ุถุจุท ุงูููุชุฑ</button>
    </aside>
    
    <!-- ูุณู ุนุฑุถ ุงูููุชุฌุงุช -->
    <section class="parts-section">
      <div class="parts-header">
        <div class="header-title">
          <i class="fas fa-th-large"></i>
          <h2>ุฌููุน ุงูููุชุฌุงุช</h2>
        </div>
        <div class="header-controls">
          <button class="btn-filter-toggle" (click)="toggleFilters()">
            <i class="fas fa-sliders-h"></i> ููุชุฑ
          </button>
          <span class="results-count">{{ filteredParts.length }} ูุชูุฌุฉ</span>
          <select [(ngModel)]="sortOption" (change)="applyFilters()">
            <option value="">ุงูุงูุชุฑุงุถู</option>
            <option value="priceAsc">ุงูุณุนุฑ ุชุตุงุนุฏู</option>
            <option value="priceDesc">ุงูุณุนุฑ ุชูุงุฒูู</option>
            <option value="ratingDesc">ุงูุฃุนูู ุชูููู</option>
          </select>
        </div>
      </div>

      <div class="parts-grid">
        <div class="part-card" *ngFor="let part of displayedParts">
          <div class="badges">
            <span *ngIf="part.condition==='New'" class="badge new">ุฌุฏูุฏ</span>
            <span *ngIf="part.discount"       class="badge discount">-{{ part.discount }}%</span>
          </div>
          <div class="part-image">
            <img [src]="part.imageUrl" alt="{{ part.name }}" />
          </div>
          <div class="part-info">
            <h4 class="store-name">{{ part.storeName }}</h4>
            <h3>{{ part.name }}</h3>
            <p class="price">{{ part.price }} ุฌ</p>
            <button class="btn-details" [routerLink]="['/parts', part.id]">
              ุนุฑุถ ุงูุชูุงุตูู
            </button>
          </div>
        </div>
      </div>

      <div class="pagination">
        <button (click)="goToPage(currentPage-1)" [disabled]="currentPage===1">
          ยซ ุงูุณุงุจู
        </button>
        <span>ุตูุญุฉ {{ currentPage }} ูู {{ totalPages }}</span>
        <button (click)="goToPage(currentPage+1)" [disabled]="currentPage===totalPages">
          ุงูุชุงูู ยป
        </button>
      </div>
    </section>



  </div>
</div>
