<div class="brand-parts-wrapper">
  <div class="brand-header">
    <div class="brand-logo">
      <img
        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2L3 7v10c0 5.55 3.84 9.74 9 9 5.16.74 9-3.45 9-9V7l-9-5z'/%3E%3C/svg%3E"
        [alt]="brandName">
    </div>
    <h2>ูุทุน ุบูุงุฑ {{ brandName }}</h2>
    <p class="brand-subtitle">{{ brandDescription }}</p>
  </div>

  <div class="filters-section">
    <h3 class="filters-title">ููุชุฑุฉ ุงููุชุงุฆุฌ</h3>
    <div class="filters-bar">
      <div class="filter-group condition-filter">
        <label for="conditionFilter">ุญุงูุฉ ุงููุทุนุฉ</label>
        <select id="conditionFilter" [(ngModel)]="selectedCondition" (change)="applyFilters()"
          (focus)="onSelectFocus($event)" (blur)="onSelectBlur($event)">
          <option value="all">ุฌููุน ุงูุญุงูุงุช</option>
          <option value="ุฌุฏูุฏ">ุฌุฏูุฏ</option>
          <option value="ุงุณุชูุฑุงุฏ">ุงุณุชูุฑุงุฏ</option>
          <option value="ูุณุชุนูู">ูุณุชุนูู</option>
        </select>
      </div>

      <div class="filter-group model-filter">
        <label for="modelFilter">ููุฏูู ุงูุณูุงุฑุฉ</label>
        <select id="modelFilter" [(ngModel)]="selectedCarModel" (change)="applyFilters()"
          (focus)="onSelectFocus($event)" (blur)="onSelectBlur($event)">
          <option value="all">ุฌููุน ุงูููุฏููุงุช</option>
          <option *ngFor="let model of carModels" [value]="model">{{ model }}</option>
        </select>
      </div>

      <div class="filter-group year-filter">
        <label for="yearFilter">ุณูุฉ ุงูููุฏูู</label>
        <select id="yearFilter" [(ngModel)]="selectedYear" (change)="applyFilters()" (focus)="onSelectFocus($event)"
          (blur)="onSelectBlur($event)">
          <option value="all">ุฌููุน ุงูุณููุงุช</option>
          <option *ngFor="let year of modelYears" [value]="year">{{ year }}</option>
        </select>
      </div>

      <div class="filter-group category-filter">
        <label for="categoryFilter">ูุฆุฉ ุงููุทุนุฉ</label>
        <select id="categoryFilter" [(ngModel)]="selectedCategory" (change)="applyFilters()"
          (focus)="onSelectFocus($event)" (blur)="onSelectBlur($event)">
          <option value="all">ุฌููุน ุงููุฆุงุช</option>
          <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
        </select>
      </div>
    </div>
  </div>

  <div class="loading-container" *ngIf="isLoading">
    <div class="loading-animation"></div>
    <p>ุฌุงุฑู ุชุญููู ูุทุน ุงูุบูุงุฑ...</p>
  </div>

  <div class="parts-grid" *ngIf="pagedParts.length > 0 && !isLoading">
    <app-card *ngFor="let part of pagedParts; trackBy: trackByPartId" [part]="part" (partClick)="onPartClick($event)">
    </app-card>
  </div>

  <div class="no-results" *ngIf="displayParts.length === 0 && !isLoading">
    <div class="no-results-icon">๐</div>
    <h3>ูุง ุชูุฌุฏ ูุชุงุฆุฌ</h3>
    <p>ูู ูุฌุฏ ูุทุน ุบูุงุฑ ุชุทุงุจู ุงูููุงุชุฑ ุงููุญุฏุฏุฉ. ุฌุฑุจ ุชุบููุฑ ุฎูุงุฑุงุช ุงูุจุญุซ.</p>
    <button class="reset-filters-btn" (click)="resetFilters()">
      ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุชุฑ
    </button>
  </div>

  <div class="pagination" *ngIf="displayParts.length > 0">
    <div class="items-per-page-selector">
      <span>ุนุฑุถ:</span>
      <button *ngFor="let option of itemsPerPageOptions"
        (click)="itemsPerPage = option; currentPage = 1; updatePagedParts()" [class.active]="itemsPerPage === option">
        {{ option }}
      </button>
    </div>
    <button class="pagination-button prev" [disabled]="currentPage === 1" (click)="prevPage()">ุงูุณุงุจู</button>
    <div class="pagination-numbers">
      <button class="pagination-number" *ngFor="let page of getPagesArray()"
        (click)="page === -1 ? null : goToPage(page)" [class.active]="page === currentPage" [disabled]="page === -1">
        {{ page === -1 ? '...' : page }}
      </button>
    </div>
    <button class="pagination-button next" [disabled]="currentPage === getTotalPages()"
      (click)="nextPage()">ุงูุชุงูู</button>
  </div>
</div>
