<div class="modern-edit-container" dir="rtl">
    <!-- Hero Header Section -->
    <div class="hero-header">
        <div class="hero-content">
            <div class="header-navigation d-flex justify-content-between align-items-center">
                <div class="header-breadcrumb">
                    <span class="breadcrumb-item">ุงูููู ุงูุดุฎุตู</span>
                    <i class="fas fa-chevron-left"></i>
                    <span class="breadcrumb-item active">ุชุนุฏูู</span>
                </div>

                <button class="modern-back-btn" (click)="goBack()">
                    <span>ุงูุนูุฏุฉ</span>
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>

            <div class="hero-title-section">
                <div class="title-content">
                    <h1 class="hero-title">{{ getMerchantTitle() }}</h1>
                    <p class="hero-subtitle">{{ isUpdateMode() ? 'ูู ุจุชุญุฏูุซ ูุนูููุงุชู ูุชุญุณูู ุชุฌุฑุจุฉ ุงูุนููุงุก ูุฒูุงุฏุฉ ุงูุซูุฉ
                        ูู ูุชุฌุฑู' : 'ุฃูุดุฆ ูููู ุงูุชุฌุงุฑู ูุงุณุชุนุฑุถ ููุชุฌุงุชู ููุนููุงุก' }}</p>
                </div>
                <div class="hero-illustration">
                    <i class="fas fa-user-edit"></i>
                </div>
            </div>
        </div>

        <!-- Step Navigation -->
        <div class="step-navigation">
            <div class="steps-container">
                <div class="step-item" *ngFor="let step of steps; let i = index"
                    [class.active]="currentStep === step.id" [class.completed]="step.completed"
                    [class.accessible]="isStepAccessible(step.id)"
                    (click)="isStepAccessible(step.id) ? goToStep(step.id) : null">
                    <div class="step-circle">
                        <i [class]="step.icon" *ngIf="!step.completed"></i>
                        <i class="fas fa-check" *ngIf="step.completed"></i>
                        <span class="step-number" *ngIf="!step.completed && !step.icon">{{step.id}}</span>
                    </div>
                    <span class="step-title">{{step.title}}</span>
                    <div class="step-connector" *ngIf="i < steps.length - 1"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Messages -->
    <div class="modern-error-alert" *ngIf="updateErrors.length > 0">
        <div class="error-icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="error-content">
            <h4>ูุฑุฌู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูุชุงููุฉ:</h4>
            <ul>
                <li *ngFor="let error of updateErrors">{{ error }}</li>
            </ul>
        </div>
    </div>

    <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="modern-edit-form">

        <!-- Step 1: Logo Upload -->
        <div class="step-content" *ngIf="currentStep === 1">
          

            <div class="form-section images-section" [class.error-section]="hasLogoError()">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-images section-icon"></i>
                        <h3>ุดุนุงุฑ ุงููุชุฌุฑ ุงูุฑุฆูุณู</h3>
                        <span class="required-badge" *ngIf="hasLogoError()">ูุทููุจ</span>
                    </div>
                    <p class="section-description">ุงุฎุชุฑ ุดุนุงุฑุงู ูููุฒุงู ููุซู ูููุฉ ูุชุฌุฑู ููุธูุฑ ูู ุฌููุน ุตูุญุงุชู</p>
                    <div class="error-message" *ngIf="hasLogoError()">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>ูุฑุฌู ุฑูุน ุดุนุงุฑ ุงููุชุฌุฑ - ูุฐุง ุงูุญูู ุฅุฌุจุงุฑู</span>
                    </div>
                </div>

                <!-- Main Logo Upload - Full Width -->
                <div class="cover-upload-full-width">
                    <div class="upload-header">
                        <h4>ุดุนุงุฑ ุงููุชุฌุฑ ุงูุฑุฆูุณู (Logo)</h4>
                        <span class="upload-hint">1200 ร 400 ุจูุณู ูููุถู - ุณูุธูุฑ ูุตูุฑุฉ ุบูุงู ุฑุฆูุณูุฉ ููุชุฌุฑู</span>
                    </div>
                    <div class="cover-preview-container-fullwidth">
                        <img [src]="previewLogo || './assets/images/default-logo.png'"
                            (error)="$any($event.target).src='./assets/images/banner.jpg'" alt="ุดุนุงุฑ ุงููุชุฌุฑ"
                            class="cover-preview-fullwidth">
                        <div class="cover-overlay-fullwidth">
                            <input type="file" #logoUpload (change)="onLogoSelected($event)" accept="image/*"
                                style="display: none;">
                            <div class="upload-actions-center">
                                <button type="button" class="modern-upload-btn-large" (click)="logoUpload.click()">
                                    <i class="fas fa-image"></i>
                                    <span>ุงุฎุชุฑ ุดุนุงุฑ ุงููุชุฌุฑ</span>
                                </button>
                                <button type="button" class="remove-image-btn-large" *ngIf="previewLogo"
                                    (click)="removeSelectedLogo()">
                                    <i class="fas fa-trash"></i>
                                    <span>ุญุฐู ุงูุดุนุงุฑ</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>
                        <i class="fas fa-map-signs"></i>
                        ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}
                    </span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn next-btn" [disabled]="!canGoToNextStep()" (click)="nextStep()">
                        <i class="fas fa-rocket"></i>
                        <span>ุงูุชุงูู</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: Basic Information -->
        <div class="step-content" *ngIf="currentStep === 2">
          
            <div class="form-section basic-info-section">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-user-tie section-icon"></i>
                        <h3>ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ</h3>
                    </div>
                    <p class="section-description">ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ุงูุชู ุชุธูุฑ ููุนููุงุก</p>
                </div>

                <div class="modern-form-grid">
                    <div class="input-group">
                        <label for="name" class="modern-label">
                            <i class="fas fa-store"></i>
                            <span>ุงุณู ุงููุชุฌุฑ <span
                                    style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></span>
                        </label>
                        <input type="text" id="name" formControlName="shopName" class="modern-input"
                            [class.error]="isFieldInvalid('shopName')" placeholder="ุฃุฏุฎู ุงุณู ุงููุชุฌุฑ">
                        <span class="error-message" *ngIf="isFieldInvalid('shopName')">
                            {{ getFieldError('shopName') }}
                        </span>
                    </div>

                    <div class="input-group">
                        <label for="phone" class="modern-label">
                            <i class="fas fa-phone"></i>
                            <span>ุฑูู ุงููุงุชู <span
                                    style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></span>
                        </label>
                        <input type="text" id="phone" formControlName="phone" class="modern-input"
                            [class.error]="isFieldInvalid('phone')" placeholder="+966 50 123 4567">
                        <span class="error-message" *ngIf="isFieldInvalid('phone')">
                            {{ getFieldError('phone') }}
                        </span>
                    </div>

                    <div class="input-group">
                        <label for="whatsapp" class="modern-label">
                            <i class="fab fa-whatsapp"></i>
                            <span>ุฑูู ุงููุงุชุณุงุจ</span>
                        </label>
                        <input type="text" id="whatsapp" formControlName="whatsapp" class="modern-input"
                            placeholder="+966 50 123 4567">
                    </div>

                    <div class="input-group">
                        <label for="email" class="modern-label">
                            <i class="fas fa-envelope"></i>
                            <span>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู <span
                                    style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></span>
                        </label>
                        <input type="email" id="email" formControlName="email" class="modern-input"
                            [class.error]="isFieldInvalid('email')" placeholder="example@domain.com">
                        <span class="error-message" *ngIf="isFieldInvalid('email')">
                            {{ getFieldError('email') }}
                        </span>
                    </div>

                    <div class="input-group ">
                        <label for="slug" class="modern-label">
                            <i class="fas fa-globe"></i>
                            <span>ูููู ุงูุตูุญุฉ </span>
                        </label>
                        <input type="url" id="slug" formControlName="slug" class="modern-input"
                            placeholder="www.example.com">
                    </div>
                </div>
            </div>

            <!-- Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}</span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn prev-btn" [disabled]="!canGoToPrevStep()" (click)="prevStep()">
                        <i class="fas fa-arrow-right"></i>
                        <span>ุงูุณุงุจู</span>
                    </button>
                    <button type="button" class="nav-btn next-btn" [disabled]="!canGoToNextStep()" (click)="nextStep()">
                        <span>ุงูุชุงูู</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 3: Location -->
        <div class="step-content" *ngIf="currentStep === 3">
        

            <div class="form-section location-section">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-map-marker-alt section-icon"></i>
                        <h3>ุงููููุน ูุงูุนููุงู</h3>
                    </div>
                    <p class="section-description">ุญุฏุฏ ูููุน ูุชุฌุฑู ุจุฏูุฉ ูุชุณููู ูุตูู ุงูุนููุงุก ุฅููู</p>
                </div>

                <div class="modern-form-grid">
                    <div class="input-group">
                        <label for="governorate" class="modern-label">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>ุงููุญุงูุธุฉ <span
                                    style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></span>
                        </label>
                        <div class="dropdown-container" [class.dropdown-loading]="isLoadingGovernorates">
                            <select id="governorate" formControlName="governorateId" class="modern-input"
                                [class.error]="isFieldInvalid('governorateId')" [disabled]="isLoadingGovernorates"
                                (change)="onGovernorateChange($event)">
                                <option value="">{{ isLoadingGovernorates ? 'ุฌุงุฑู ุงูุชุญููู...' : 'ุงุฎุชุฑ ุงููุญุงูุธุฉ' }}
                                </option>
                                <option *ngFor="let governorate of governorates" [value]="governorate.id">
                                    {{ governorate.name }}
                                </option>
                            </select>
                        </div>
                        <span class="error-message" *ngIf="isFieldInvalid('governorateId')">
                            {{ getFieldError('governorateId') }}
                        </span>
                    </div>

                    <div class="input-group">
                        <label for="city" class="modern-label">
                            <i class="fas fa-city"></i>
                            <span>ุงููุฏููุฉ <span
                                    style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></span>
                        </label>
                        <div class="dropdown-container" [class.dropdown-loading]="isLoadingCities">
                            <select id="city" formControlName="cityId" class="modern-input"
                                [class.error]="isFieldInvalid('cityId')" [disabled]="!cities.length || isLoadingCities">
                                <option value="">
                                    {{ isLoadingCities ? 'ุฌุงุฑู ุงูุชุญููู...' :
                                    (!editForm.get('governorateId')?.value ? 'ุงุฎุชุฑ ุงููุญุงูุธุฉ ุฃููุงู' : 'ุงุฎุชุฑ ุงููุฏููุฉ') }}
                                </option>
                                <option *ngFor="let city of cities" [value]="city.id">
                                    {{ city.nameAr }}
                                </option>
                            </select>
                        </div>
                        <span class="error-message" *ngIf="isFieldInvalid('cityId')">
                            {{ getFieldError('cityId') }}
                        </span>
                        <small class="field-hint"
                            *ngIf="!cities.length && editForm.get('governorateId')?.value && !isLoadingCities">
                            <i class="fas fa-info-circle"></i>
                            ูุง ุชูุฌุฏ ูุฏู ูุชุงุญุฉ ููุฐู ุงููุญุงูุธุฉ
                        </small>
                    </div>

                    <div class="input-group full-width">
                        <label for="address" class="modern-label">
                            <i class="fas fa-map-pin"></i>
                            <span>ุงูุนููุงู ุจุงูุชูุตูู <span
                                    style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></span>
                        </label>
                        <textarea id="address" formControlName="address" class="modern-input" rows="3"
                            [class.error]="isFieldInvalid('address')"
                            placeholder="ุงูุดุงุฑุนุ ุฑูู ุงููุจููุ ุงูุญูุ ูุนุงูู ูููุฒุฉ ูุฑูุจุฉ"></textarea>
                        <span class="error-message" *ngIf="isFieldInvalid('address')">
                            {{ getFieldError('address') }}
                        </span>
                    </div>

                    <div class="input-group full-width">
                        <label for="locationOnMap" class="modern-label">
                            <i class="fas fa-map-marked-alt"></i>
                            <span>ุฑุงุจุท ุงููููุน ุนูู ุงูุฎุฑูุทุฉ <span
                                    style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></span>
                        </label>
                        <input type="url" id="locationOnMap" formControlName="locationOnMap" class="modern-input"
                            [class.error]="isFieldInvalid('locationOnMap')"
                            placeholder="ุฃุฏุฎู ุฑุงุจุท ูููุน ูุชุฌุฑู ุนูู Google Maps ุฃู ุฃู ุฎุฑูุทุฉ ุฃุฎุฑู">
                        <small class="field-hint">
                            <i class="fas fa-info-circle"></i>
                            ูุซุงู: https://goo.gl/maps/xyz ุฃู https://maps.google.com/...
                        </small>
                        <span class="error-message" *ngIf="isFieldInvalid('locationOnMap')">
                            {{ getFieldError('locationOnMap') }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}</span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn prev-btn" [disabled]="!canGoToPrevStep()" (click)="prevStep()">
                        <i class="fas fa-arrow-right"></i>
                        <span>ุงูุณุงุจู</span>
                    </button>
                    <button type="button" class="nav-btn next-btn" [disabled]="!canGoToNextStep()" (click)="nextStep()">
                        <span>ุงูุชุงูู</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 4: Documents -->
        <div class="step-content" *ngIf="currentStep === 4">
         

            <div class="form-section documents-section-enhanced">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-file-shield section-icon"></i>
                        <h3>ุงููุซุงุฆู ุงูุฑุณููุฉ</h3>
                    </div>
                    <p class="section-description">ุฃุถู ุงููุซุงุฆู ุงููุทููุจุฉ ูุชูุซูู ูุชุฌุฑู ูุถูุงู ุงููุตุฏุงููุฉ</p>
                </div>

                <div class="documents-grid-enhanced">
                    <!-- Commercial Registration -->
                    <div class="document-card-enhanced commercial-reg-card">
                        <div class="document-header-enhanced">
                            <div class="document-icon-wrapper">
                                <i class="fas fa-building"></i>
                            </div>
                            <h4>ุงูุณุฌู ุงูุชุฌุงุฑู</h4>
                            <span class="document-description">ูุซููุฉ ุชุซุจุช ุดุฑุนูุฉ ุงููุดุงุท ุงูุชุฌุงุฑู</span>
                        </div>

                        <div class="input-group-enhanced">
                            <label for="commercialRegNumber" class="modern-label-enhanced">
                                <i class="fas fa-hashtag"></i>
                                <span>ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู <span class="required-star">*</span></span>
                            </label>
                            <input type="text" id="commercialRegNumber" formControlName="commercialRegistrationNumber"
                                class="modern-input-enhanced"
                                [class.error]="isFieldInvalid('commercialRegistrationNumber')"
                                placeholder="ุฃุฏุฎู ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู">
                            <span class="error-message" *ngIf="isFieldInvalid('commercialRegistrationNumber')">
                                {{ getFieldError('commercialRegistrationNumber') }}
                            </span>
                        </div>

                        <div class="document-upload-enhanced">
                            <div class="upload-area" [class.has-image]="previewCommercialReg">
                                <input type="file" #commercialRegUpload (change)="onCommercialRegSelected($event)"
                                    accept="image/*" style="display: none;">

                                <div class="upload-placeholder" *ngIf="!previewCommercialReg"
                                    (click)="commercialRegUpload.click()">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <h5>ุงุฑูุน ุตูุฑุฉ ุงูุณุฌู ุงูุชุฌุงุฑู</h5>
                                    <p>PNG, JPG ุฃู GIF (ุงูุญุฏ ุงูุฃูุตู 5MB)</p>
                                    <button type="button" class="upload-btn-enhanced">
                                        <i class="fas fa-camera"></i>
                                        ุงุฎุชุฑ ุงูููู
                                    </button>
                                </div>

                                <div class="preview-container-enhanced" *ngIf="previewCommercialReg">
                                    <div class="image-wrapper">
                                        <img [src]="previewCommercialReg" alt="ุงูุณุฌู ุงูุชุฌุงุฑู"
                                            class="preview-image-enhanced">
                                        <div class="image-overlay">
                                            <button type="button" class="change-btn"
                                                (click)="commercialRegUpload.click()">
                                                <i class="fas fa-edit"></i>
                                                ุชุบููุฑ
                                            </button>
                                            <button type="button" class="remove-btn-enhanced"
                                                (click)="removeCommercialReg()">
                                                <i class="fas fa-trash"></i>
                                                ุญุฐู
                                            </button>
                                        </div>
                                    </div>
                                    <div class="image-info">
                                        <i class="fas fa-check-circle success-icon"></i>
                                        <span>ุชู ุฑูุน ุงูุณุฌู ุงูุชุฌุงุฑู ุจูุฌุงุญ</span>
                                    </div>
                                </div>
                            </div>

                            <div class="validation-message error" *ngIf="!selectedCommercialReg">
                                <i class="fas fa-exclamation-triangle"></i>
                                ุตูุฑุฉ ุงูุณุฌู ุงูุชุฌุงุฑู ูุทููุจุฉ
                            </div>
                        </div>
                    </div>

                    <!-- National ID -->
                    <div class="document-card-enhanced national-id-card">
                        <div class="document-header-enhanced">
                            <div class="document-icon-wrapper">
                                <i class="fas fa-id-card"></i>
                            </div>
                            <h4>ุจุทุงูุฉ ุงููููุฉ</h4>
                            <span class="document-description">ูุซููุฉ ุฅุซุจุงุช ุงููููุฉ ุงูุดุฎุตูุฉ</span>
                        </div>

                        <div class="input-group-enhanced">
                            <label for="nationalIdNumber" class="modern-label-enhanced">
                                <i class="fas fa-hashtag"></i>
                                <span>ุฑูู ุจุทุงูุฉ ุงููููุฉ <span class="required-star">*</span></span>
                            </label>
                            <input type="text" id="nationalIdNumber" formControlName="nationalIdNumber"
                                class="modern-input-enhanced" [class.error]="isFieldInvalid('nationalIdNumber')"
                                placeholder="ุฃุฏุฎู ุฑูู ุจุทุงูุฉ ุงููููุฉ">
                            <span class="error-message" *ngIf="isFieldInvalid('nationalIdNumber')">
                                {{ getFieldError('nationalIdNumber') }}
                            </span>
                        </div>

                        <div class="document-upload-enhanced">
                            <div class="upload-area" [class.has-image]="previewNationalId">
                                <input type="file" #nationalIdUpload (change)="onNationalIdSelected($event)"
                                    accept="image/*" style="display: none;">

                                <div class="upload-placeholder" *ngIf="!previewNationalId"
                                    (click)="nationalIdUpload.click()">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <h5>ุงุฑูุน ุตูุฑุฉ ุจุทุงูุฉ ุงููููุฉ</h5>
                                    <p>PNG, JPG ุฃู GIF (ุงูุญุฏ ุงูุฃูุตู 5MB)</p>
                                    <button type="button" class="upload-btn-enhanced">
                                        <i class="fas fa-camera"></i>
                                        ุงุฎุชุฑ ุงูููู
                                    </button>
                                </div>

                                <div class="preview-container-enhanced" *ngIf="previewNationalId">
                                    <div class="image-wrapper">
                                        <img [src]="previewNationalId" alt="ุจุทุงูุฉ ุงููููุฉ"
                                            class="preview-image-enhanced">
                                        <div class="image-overlay">
                                            <button type="button" class="change-btn" (click)="nationalIdUpload.click()">
                                                <i class="fas fa-edit"></i>
                                                ุชุบููุฑ
                                            </button>
                                            <button type="button" class="remove-btn-enhanced"
                                                (click)="removeNationalId()">
                                                <i class="fas fa-trash"></i>
                                                ุญุฐู
                                            </button>
                                        </div>
                                    </div>
                                    <div class="image-info">
                                        <i class="fas fa-check-circle success-icon"></i>
                                        <span>ุชู ุฑูุน ุจุทุงูุฉ ุงููููุฉ ุจูุฌุงุญ</span>
                                    </div>
                                </div>
                            </div>

                            <div class="validation-message error" *ngIf="!selectedNationalId">
                                <i class="fas fa-exclamation-triangle"></i>
                                ุตูุฑุฉ ุจุทุงูุฉ ุงููููุฉ ูุทููุจุฉ
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}</span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn prev-btn" [disabled]="!canGoToPrevStep()" (click)="prevStep()">
                        <i class="fas fa-arrow-right"></i>
                        <span>ุงูุณุงุจู</span>
                    </button>
                    <button type="button" class="nav-btn next-btn" [disabled]="!canGoToNextStep()" (click)="nextStep()">
                        <span>ุงูุชุงูู</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 5: Team Members -->
        <div class="step-content" *ngIf="currentStep === 5">
          

            <!-- Team Members Section -->
            <div class="form-section members-section">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-users section-icon"></i>
                        <h3>ูุฑูู ุงูุนูู</h3>
                    </div>
                    <p class="section-description">ุฃุถู ุงูุฃุนุถุงุก ุงูุนุงูููู ูู ูุชุฌุฑู</p>
                </div>

                <div class="members-container">
                    <div class="members-list">
                        <div class="member-card" *ngFor="let member of membersArray.controls; let i = index"
                            [formGroup]="getMemberControl(i)">
                            <div class="member-header">
                                <i class="fas fa-user"></i>
                                <span>ุนุถู {{ i + 1 }}</span>
                                <button type="button" class="remove-member-btn" (click)="removeMember(i)"
                                    *ngIf="membersArray.length > 1">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>

                            <div class="member-fields">
                                <div class="input-group">
                                    <label class="field-label">ุงูุงุณู ุงููุงูู <span
                                            style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></label>
                                    <input type="text" formControlName="name" class="modern-input"
                                        placeholder="ุงุณู ุงูุนุถู">
                                </div>
                                <div class="input-group">
                                    <label class="field-label">ุฑูู ุงููุงุชู <span
                                            style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></label>
                                    <input type="text" formControlName="phone" class="modern-input"
                                        placeholder="ุฑูู ุงููุงุชู">
                                </div>
                                <div class="input-group">
                                    <label class="field-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                                    <input type="email" formControlName="email" class="modern-input"
                                        [class.error]="getMemberControl(i).get('email')?.invalid && getMemberControl(i).get('email')?.touched"
                                        placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)">
                                    <span class="error-message"
                                        *ngIf="getMemberControl(i).get('email')?.invalid && getMemberControl(i).get('email')?.touched">
                                        ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ
                                    </span>
                                </div>

                                <div class="input-group">
                                    <label class="field-label">ุงุณู ุงููุณุชุฎุฏู <span
                                            style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></label>
                                    <input type="text" formControlName="username" class="modern-input"
                                        placeholder="ุงุณู ุงููุณุชุฎุฏู ููุฏุฎูู">
                                </div>
                                <div class="input-group">
                                    <label class="field-label">ูููุฉ ุงููุฑูุฑ <span
                                            style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></label>
                                    <input [type]="showPassword ? 'text' : 'password'" formControlName="password"
                                        class="modern-input"
                                        [class.error]="getMemberControl(i).get('password')?.invalid && getMemberControl(i).get('password')?.touched"
                                        placeholder="ูููุฉ ุงููุฑูุฑ">
                                    <div class="password-errors"
                                        *ngIf="getMemberControl(i).get('password')?.invalid && getMemberControl(i).get('password')?.touched">
                                        <small class="error-message" *ngFor="let error of getPasswordErrors(i)">{{ error
                                            }}</small>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label class="field-label">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ <span
                                            style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></label>
                                    <input [type]="showPassword ? 'text' : 'password'" formControlName="confirmPassword"
                                        class="modern-input" [class.error]="hasPasswordMismatch(i)"
                                        placeholder="ุฃุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ">
                                    <small class="error-message" *ngIf="hasPasswordMismatch(i)">
                                        ูููุงุช ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุฉ
                                    </small>
                                </div>
                                <div class="input-group full-width">
                                    <label class="field-label">ุงูุฏูุฑ/ุงูููุตุจ <span
                                            style="color: #dc3545; font-size: 1.2em; font-weight: bold;">*</span></label>
                                    <select formControlName="position" class="modern-input">
                                        <option value="">ุงุฎุชุฑ ุงูุฏูุฑ</option>
                                        <option *ngFor="let role of roles" [value]="role.value">{{ role.label }}
                                        </option>
                                    </select>
                                </div>
                                <!-- Password visibility controls -->
                                <div class="input-group full-width">
                                    <div class="password-controls">
                                        <label class="password-visibility-toggle">
                                            <input type="checkbox" [checked]="showPassword"
                                                (change)="togglePasswordVisibility()">
                                            <span class="checkmark"></span>
                                            <span class="toggle-text">ุฅุธูุงุฑ ูููุงุช ุงููุฑูุฑ</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="add-member-btn" (click)="addMember()">
                        <i class="fas fa-plus"></i>
                        <span>ุฅุถุงูุฉ ุนุถู ุฌุฏูุฏ</span>
                    </button>
                </div>
            </div>

            <!-- Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}</span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn prev-btn" [disabled]="!canGoToPrevStep()" (click)="prevStep()">
                        <i class="fas fa-arrow-right"></i>
                        <span>ุงูุณุงุจู</span>
                    </button>
                    <button type="button" class="nav-btn next-btn" [disabled]="!canGoToNextStep()" (click)="nextStep()">
                        <span>ุงูุชุงูู</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 6: Business Hours -->
        <div class="step-content" *ngIf="currentStep === 6">
          

            <div class="form-section hours-section">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-clock section-icon"></i>
                        <h3>ุณุงุนุงุช ุงูุนูู</h3>
                    </div>
                    <p class="section-description">ุญุฏุฏ ุณุงุนุงุช ุนูู ูุชุฌุฑู ุจุดูู ูุงุถุญ ููุจุงุดุฑ</p>
                </div>

                <div class="business-hours-container">
                    <!-- Compact Days Grid -->
                    <div class="compact-hours-grid">
                        <div class="day-card" *ngFor="let _ of businessHoursArray.controls; let i = index"
                            [formGroup]="getDayControl(i)" [class.active]="getDayControl(i).get('isOpen')?.value">

                            <!-- Day Header -->
                            <div class="day-header">
                                <div class="day-info">
                                    <h5 class="day-name">{{ getDayControl(i).get('day')?.value }}</h5>
                                    <span class="day-status" [class.open]="getDayControl(i).get('isOpen')?.value"
                                        [class.closed]="!getDayControl(i).get('isOpen')?.value">
                                        {{ getDayControl(i).get('isOpen')?.value ? 'ููุชูุญ' : 'ูุบูู' }}
                                    </span>
                                </div>

                                <!-- Simple Toggle -->
                                <label class="simple-toggle" [class.active]="getDayControl(i).get('isOpen')?.value"
                                    (click)="toggleBusinessDay(i)">
                                    <input type="checkbox" [checked]="getDayControl(i).get('isOpen')?.value"
                                        (click)="$event.stopPropagation()">
                                    <span class="toggle-slider">
                                        <span class="slider-track"></span>
                                        <span class="slider-thumb"></span>
                                    </span>
                                </label>
                            </div>

                            <!-- Time Inputs - Only when open -->
                            <div class="time-section" *ngIf="getDayControl(i).get('isOpen')?.value">
                                <div class="time-inputs-row">
                                    <div class="time-input-group">
                                        <label class="time-label">
                                            <i class="fas fa-sun"></i>
                                            ูู
                                        </label>
                                        <input type="time" formControlName="openTime" class="time-input">
                                    </div>

                                    <div class="time-separator">
                                        <i class="fas fa-arrow-left"></i>
                                    </div>

                                    <div class="time-input-group">
                                        <label class="time-label">
                                            <i class="fas fa-moon"></i>
                                            ุฅูู
                                        </label>
                                        <input type="time" formControlName="closeTime" class="time-input">
                                    </div>
                                </div>

                                <!-- Text Input Alternative -->
                                <!-- <div class="text-hours-input">
                                <label class="text-label">
                                    <i class="fas fa-edit"></i>
                                    ุฃู ุงูุชุจ ูุตูุงู
                                </label>
                                <input type="text" formControlName="hours" 
                                       class="hours-text-field"
                                       placeholder="9:00 ุต - 9:00 ู">
                            </div> -->
                            </div>

                            <!-- Closed Message -->
                            <div class="closed-message" *ngIf="!getDayControl(i).get('isOpen')?.value">
                                <i class="fas fa-store-slash"></i>
                                <span>ูุบูู</span>
                            </div>
                        </div>
                    </div>

                    <!-- Simple Tips -->
                    <div class="hours-tips">
                        <div class="tip">
                            <i class="fas fa-info-circle"></i>
                            <span>ุญุฏุฏ ุณุงุนุงุช ูุงูุนูุฉ ููู ูุชุงุญุงู ููุนููุงุก ูู ุงูุฃููุงุช ุงูููุงุณุจุฉ</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}</span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn prev-btn" [disabled]="!canGoToPrevStep()" (click)="prevStep()">
                        <i class="fas fa-arrow-right"></i>
                        <span>ุงูุณุงุจู</span>
                    </button>
                    <button type="button" class="nav-btn next-btn" [disabled]="!canGoToNextStep()" (click)="nextStep()">
                        <span>ุงูุชุงูู</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 7: Categories -->
        <div class="step-content" *ngIf="currentStep === 7">
         

            <!-- Revolutionary Categories Design with Advanced Animation -->
            <div class="form-section categories-section-revolutionary">
                <div class="section-header-artistic">
                    <div class="section-title-container">
                        <div class="title-icon-animated">
                            <i class="fas fa-layer-group"></i>
                            <div class="icon-glow"></div>
                        </div>
                        <div class="title-content">
                            <h3 class="gradient-title">๐ฏ ุชุตูููุงุช ุงููุชุฌุฑ ุงููุชูุฏูุฉ</h3>
                            <p class="title-subtitle">ุงุฎุชุฑ ุงูุชุตูููุงุช ุงูุชู ุชูุซู ุชุฎุตุต ูุชุฌุฑู ุจุฏูุฉ</p>
                        </div>
                    </div>
                    <div class="categories-stats" *ngIf="!isLoadingCategories">
                        <div class="stat-item">
                            <span class="stat-number">{{ categories.length }}</span>
                            <span class="stat-label">ุชุตููู ูุชุงุญ</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">{{ (editForm.get('categoriesIds')?.value?.length || 0) }}</span>
                            <span class="stat-label">ูุฎุชุงุฑ</span>
                        </div>
                    </div>
                </div>

                <!-- Loading State with Advanced Animation -->
                <div class="loading-state-advanced" *ngIf="isLoadingCategories">
                    <div class="loading-spinner-container">
                        <div class="spinner-advanced">
                            <div class="spinner-ring"></div>
                            <div class="spinner-ring"></div>
                            <div class="spinner-ring"></div>
                        </div>
                        <div class="loading-text">
                            <h4>ุฌุงุฑู ุชุญููู ุงูุชุตูููุงุช...</h4>
                            <p>ุงูุฑุฌุงุก ุงูุงูุชุธุงุฑ ููููุงู</p>
                        </div>
                    </div>
                </div>

                <!-- Advanced Categories Grid -->
                <div class="categories-grid-advanced" *ngIf="!isLoadingCategories && categories.length > 0">
                    <div class="grid-header">
                        <h4>๐๏ธ ุงุฎุชุฑ ุงูุชุตูููุงุช ุงูููุงุณุจุฉ ููุชุฌุฑู</h4>
                        <div class="selection-actions">
                            <button type="button" class="btn-select-all" (click)="selectAllCategories()"
                                *ngIf="(editForm.get('categoriesIds')?.value?.length || 0) < categories.length">
                                <i class="fas fa-check-double"></i>
                                ุงุฎุชูุงุฑ ุงููู
                            </button>
                            <button type="button" class="btn-clear-all" (click)="clearAllCategories()"
                                *ngIf="(editForm.get('categoriesIds')?.value?.length || 0) > 0">
                                <i class="fas fa-times-circle"></i>
                                ุฅูุบุงุก ุงููู
                            </button>
                        </div>
                    </div>

                    <div class="categories-masonry-grid">
                        <div class="category-card-compact" *ngFor="let category of categories; let i = index"
                            [class.selected]="isCategorySelected(category.id!)" (click)="toggleCategory(category.id!)"
                            [style.animation-delay]="i * 30 + 'ms'">

                            <div class="card-background-effect"></div>

                            <div class="category-content-compact">
                                <div class="category-icon-small">
                                    <i class="fas fa-tag"></i>
                                </div>
                                <span class="category-name-compact">{{ category.name }}</span>
                            </div>

                            <div class="selection-indicator-ring"></div>
                        </div>

                        <!-- Add New Category Card -->
                        <div class="category-card-compact add-new-category" (click)="showAddCategoryModal()">
                            <div class="category-content-compact">
                                <div class="category-icon-small add-icon">
                                    <i class="fas fa-plus"></i>
                                </div>
                                <span class="category-name-compact">ุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- No Categories State -->
                <div class="no-categories-state" *ngIf="!isLoadingCategories && categories.length === 0">
                    <div class="empty-state-container">
                        <div class="empty-state-icon">
                            <i class="fas fa-folder-open"></i>
                        </div>
                        <h4>ูุง ุชูุฌุฏ ุชุตูููุงุช ูุชุงุญุฉ</h4>
                        <p>ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ุฃู ุงูุงุชุตุงู ุจุงูุฏุนู ุงูููู</p>
                        <button type="button" class="btn-retry" (click)="loadCategories()">
                            <i class="fas fa-redo"></i>
                            ุฅุนุงุฏุฉ ุงููุญุงููุฉ
                        </button>
                    </div>
                </div>

                <!-- Selected Categories Showcase -->
                <div class="selected-categories-showcase"
                    *ngIf="(editForm.get('categoriesIds')?.value?.length || 0) > 0">
                    <div class="showcase-header">
                        <h4>โจ ุงูุชุตูููุงุช ุงููุฎุชุงุฑุฉ ({{ editForm.get('categoriesIds')?.value?.length }})</h4>
                        <div class="showcase-actions">
                            <button type="button" class="btn-minimize">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </div>

                    <div class="selected-categories-flow">
                        <div class="selected-category-chip"
                            *ngFor="let categoryId of editForm.get('categoriesIds')?.value; let i = index"
                            [style.animation-delay]="i * 100 + 'ms'">

                            <div class="chip-content">
                                <i class="fas fa-tag chip-icon"></i>
                                <span class="chip-text">{{ getCategoryName(categoryId) }}</span>
                                <button type="button" class="chip-remove" (click)="toggleCategory(categoryId)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>

                            <div class="chip-glow"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}</span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn prev-btn" [disabled]="!canGoToPrevStep()" (click)="prevStep()">
                        <i class="fas fa-arrow-right"></i>
                        <span>ุงูุณุงุจู</span>
                    </button>
                    <button type="button" class="nav-btn next-btn" [disabled]="!canGoToNextStep()" (click)="nextStep()">
                        <span>ุงูุชุงูู</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 8: Description -->
        <div class="step-content" *ngIf="currentStep === 8">
          

            <div class="form-section description-section">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-file-alt section-icon"></i>
                        <h3>ูุตู ุงููุชุฌุฑ</h3>
                    </div>
                    <p class="section-description">ุงูุชุจ ูุตูุงู ุฌุฐุงุจุงู ุนู ูุชุฌุฑู ูุฎุฏูุงุชู ูุฌุฐุจ ุงููุฒูุฏ ูู ุงูุนููุงุก</p>
                </div>

                <div class="description-container">
                    <!-- Short Description -->
                    <div class="input-group">
                        <label for="shortDescription" class="modern-label">
                            <i class="fas fa-comment-alt"></i>
                            <span>ูุตู ูุตูุฑ ูููุชุฌุฑ</span>
                        </label>
                        <input type="text" id="shortDescription" formControlName="shortDescription" class="modern-input"
                            placeholder="ูุตู ูุฎุชุตุฑ ูู ุณุทุฑ ูุงุญุฏ ูุธูุฑ ูู ุงูุจุญุซ">
                        <small class="field-hint">ูุฐุง ุงููุตู ุณูุธูุฑ ูู ูุชุงุฆุฌ ุงูุจุญุซ ูุนูู ุงูุจุทุงูุฉ ุงูุฎุงุตุฉ ุจูุชุฌุฑู</small>
                    </div>

                    <!-- Long Description -->
                    <div class="textarea-wrapper">
                        <label for="description" class="modern-label">
                            <i class="fas fa-align-left"></i>
                            <span>ูุตู ููุตู ูููุชุฌุฑ</span>
                        </label>
                        <textarea id="description" formControlName="description" class="modern-textarea" rows="6"
                            placeholder="ุงูุชุจ ูุตูุงู ููุฌุฒุงู ูุฌุฐุงุจุงู ุนู ูุชุฌุฑู ูุฎุฏูุงุชู...
ูุซุงู: ูุชุฎุตุตูู ูู ูุทุน ุบูุงุฑ ุงูุณูุงุฑุงุช ุงูุฃุตููุฉ ูุงูุจุฏููุฉ ุจุฌูุฏุฉ ุนุงููุฉ ูุฃุณุนุงุฑ ููุงูุณุฉ. ูููุฑ ูุทุน ุบูุงุฑ ูุฌููุน ุฃููุงุน ุงูุณูุงุฑุงุช ูุน ุถูุงู ุงูุฌูุฏุฉ ูุฎุฏูุฉ ุงูุชูุตูู ุงูุณุฑูุน."></textarea>
                        <div class="textarea-footer">
                            <span class="char-count">{{ editForm.get('description')?.value?.length || 0 }}/500</span>
                            <div class="writing-tips">
                                <i class="fas fa-lightbulb"></i>
                                <span>ูุตูุญุฉ: ุงุฐูุฑ ุชุฎุตุตุงุชู ููุง ูููุฒู ุนู ุงูููุงูุณูู</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step Navigation Buttons -->
            <div class="step-bottom-navigation">
                <div class="step-indicator">
                    <span>ุฎุทูุฉ {{currentStep}} ูู {{totalSteps}}</span>
                </div>
                <div class="nav-buttons-container">
                    <button type="button" class="nav-btn prev-btn" [disabled]="!canGoToPrevStep()" (click)="prevStep()">
                        <i class="fas fa-arrow-right"></i>
                        <span>ุงูุณุงุจู</span>
                    </button>
                    <button type="submit" class="nav-btn submit-btn" [disabled]="!isFormReadyForSubmit() || isLoading">
                        <div class="btn-content" *ngIf="!isLoading">
                            <i class="fas fa-save"></i>
                            <span>{{ isUpdateMode() ? 'ุญูุธ ุงูุชุบููุฑุงุช' : 'ุฅูุดุงุก ุงูููู ุงูุชุฌุงุฑู' }}</span>
                        </div>
                        <div class="btn-content loading" *ngIf="isLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span>{{ isUpdateMode() ? 'ุฌุงุฑู ุงูุญูุธ...' : 'ุฌุงุฑู ุงูุฅูุดุงุก...' }}</span>
                        </div>
                    </button>
                </div>
            </div>
        </div>



        <!-- Add Category Modal -->
        <app-add-category-modal *ngIf="showAddCategoryForm" (categoryAdded)="onCategoryAdded($event)"
            (modalClosed)="hideAddCategoryModal()">
        </app-add-category-modal>

        <!-- CSS Animations for Modal -->
        <style>
            @keyframes modalSlideIn {
                from {
                    opacity: 0;
                    transform: translate(-50%, -60%) scale(0.9);
                }

                to {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
            }

            .add-category-modal {
                animation: modalFadeIn 0.3s ease-out;
                /* Force modal to stay in viewport center regardless of page scroll */
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                z-index: 10000 !important;
            }

            @keyframes modalFadeIn {
                from {
                    opacity: 0;
                    backdrop-filter: blur(0px);
                }

                to {
                    opacity: 1;
                    backdrop-filter: blur(5px);
                }
            }

            /* Enhanced modal positioning for long pages */
            .add-category-modal .modal-content {
                /* Use fixed positioning to center exactly in viewport regardless of page scroll */
                position: fixed !important;
                top: 50vh !important;
                left: 50vw !important;
                transform: translate(-50%, -50%) !important;
                margin: 0 !important;
                /* Ensure modal stays within viewport */
                max-height: 80vh !important;
                overflow-y: auto !important;
                /* Force viewport positioning */
                z-index: 10001 !important;
            }

            /* Fallback positioning for very small screens */
            @media (max-height: 600px) {
                .add-category-modal .modal-content {
                    top: 10vh !important;
                    transform: translateX(-50%) !important;
                    max-height: 80vh !important;
                }
            }

            /* Better mobile responsiveness */
            @media (max-width: 768px) {
                .add-category-modal .modal-content {
                    width: 95vw !important;
                    max-width: 95vw !important;
                    padding: 1.5rem !important;
                    left: 50vw !important;
                    top: 50vh !important;
                }
            }

            /* Force modal to always stay in viewport center */
            .add-category-modal .modal-content {
                position: fixed !important;
                top: 50vh !important;
                left: 50vw !important;
                transform: translate(-50%, -50%) !important;
                z-index: 10001 !important;
                /* Prevent any layout shifts */
                margin: 0 !important;
                right: auto !important;
                bottom: auto !important;
            }

            /* Prevent body scroll when modal is open and ensure modal stays in place */
            body.modal-open {
                overflow: hidden !important;
                position: fixed !important;
                width: 100% !important;
                height: 100% !important;
            }

            /* Additional safety measures for viewport centering */
            .add-category-modal {
                display: block !important;
                overflow: auto !important;
                -webkit-overflow-scrolling: touch !important;
            }

            /* Ensure modal container takes full viewport */
            .add-category-modal {
                width: 100vw !important;
                height: 100vh !important;
                position: fixed !important;
            }

            /* Style enhancements for better visibility */
            .add-category-modal .modal-content {
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5) !important;
                border: 1px solid rgba(255, 255, 255, 0.2) !important;
            }

            /* Animation keyframes for smooth appearance */
            @keyframes modalSlideIn {
                0% {
                    opacity: 0;
                    transform: translate(-50%, -60%) scale(0.8);
                }

                50% {
                    opacity: 0.8;
                    transform: translate(-50%, -55%) scale(0.95);
                }

                100% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
            }

            /* Override any parent positioning context */
            .add-category-modal {
                /* Force modal to escape any positioned containers */
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                z-index: 99999 !important;
                /* Ensure it covers entire viewport */
                width: 100vw !important;
                height: 100vh !important;
                /* Remove any transforms that might affect positioning */
                transform: none !important;
            }

            /* Force modal content to center in viewport */
            .add-category-modal .modal-content {
                /* Use viewport units for absolute screen positioning */
                position: fixed !important;
                top: 50vh !important;
                left: 50vw !important;
                transform: translate(-50%, -50%) !important;
                z-index: 100000 !important;
                /* Override any inherited positioning */
                margin: 0 !important;
                right: auto !important;
                bottom: auto !important;
                /* Force out of document flow */
                float: none !important;
                clear: none !important;
            }
        </style>